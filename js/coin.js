const getMarketURL=e=>"https://api.coingecko.com/api/v3/coins/markets?vs_currency=usd&order=market_cap_desc&per_page=50&page="+e+"&sparkline=false&price_change_percentage=1h%2C24h%2C7d",getDefiCoinsURL=e=>"https://api.coingecko.com/api/v3/coins/markets?vs_currency=usd&category=decentralized-finance-defi&order=market_cap_desc&per_page=70&page="+e+"&sparkline=false&price_change_percentage=1h%2C24h%2C7d",getDEXCoinsURL=e=>"https://api.coingecko.com/api/v3/coins/markets?vs_currency=usd&category=decentralized-exchange&order=market_cap_desc&per_page=70&page="+e+"&sparkline=false&price_change_percentage=1h%2C24h%2C7d",getGlobalURL=()=>"https://api.coingecko.com/api/v3/global",formatDollar=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e);async function getRankingData(e){await fetch(e).then(e=>e.json()).then(e=>loadRankingIntoTable(e)).catch(console.error)}async function getGlobalData(e){await fetch(e).then(e=>e.json()).then(e=>loadGlobalDataIntoInfoHead(e)).catch(console.error)}async function getDefiCoinsData(e){await fetch(e).then(e=>e.json()).then(e=>loadDefiCoinsToTable(e)).catch(console.error)}async function getDEXCoinsData(e){await fetch(e).then(e=>e.json()).then(e=>loadDEXCoinsToTable(e)).catch(console.error)}function loadGlobalDataIntoInfoHead(e){let t=document.querySelector("#coins"),a=document.querySelector("#exchanges"),r=document.querySelector("#marketcap1"),n=document.querySelector("#volume24h"),c=document.querySelector("#marketcap2"),o=document.querySelector("#mcap_change");t.innerHTML=e.data.active_cryptocurrencies,a.innerHTML=e.data.markets,r.innerHTML=formatDollar(e.data.total_market_cap.usd),n.innerHTML=formatDollar(e.data.total_volume.usd),c.innerHTML=formatDollar(e.data.total_market_cap.usd).substring(0,5),o.innerHTML=Math.round(100*e.data.market_cap_change_percentage_24h_usd)/100+"%",e.data.market_cap_change_percentage_24h_usd>0?o.classList="text-success":o.classList="text-danger"}function loadRankingIntoTable(e){let t=document.querySelector("#ranking-table-body"),a="",r=[],n=[],c=[],o=[],i=[],s=[],l=[],d=[],u=[],h=[];for(let t of e)r.push(t.market_cap_rank),n.push(t.image),c.push(t.name),o.push(t.current_price),i.push(t.price_change_percentage_1h_in_currency),s.push(t.price_change_percentage_24h_in_currency),l.push(t.price_change_percentage_7d_in_currency),d.push(t.total_volume),u.push(t.market_cap),h.push(t.fully_diluted_valuation);for(let e=0;e<c.length;e++)a+="<tr>",a+=`<td>${r[e]}</td>`,a+=`<td><img class="mx-2" width="20" src="${n[e]}">${c[e]}</td>`,a+=`<td>${"$"+o[e]}</td>`,a+=`<td class=${i[e]>0?"text-success":"text-danger"}>${i[e].toFixed(2)+"%"}</td>`,a+=`<td class=${s[e]>0?"text-success":"text-danger"}>${s[e].toFixed(2)+"%"}</td>`,a+=`<td class=${l[e]>0?"text-success":"text-danger"}>${l[e].toFixed(2)+"%"}</td>`,a+=`<td>${formatDollar(d[e])}</td>`,a+=`<td>${formatDollar(u[e])}</td>`,a+=`<td>${formatDollar(h[e])}</td>`,a+="</tr>";t.innerHTML=a}function loadDefiCoinsToTable(e){let t=document.querySelector("#defi-table-body"),a="",r=[],n=[],c=[],o=[],i=[],s=[],l=[],d=[],u=[],h=[],g=1;for(let t of e)r.push(g++),n.push(t.image),c.push(t.name),o.push(t.current_price),i.push(t.price_change_percentage_1h_in_currency),s.push(t.price_change_percentage_24h_in_currency),l.push(t.price_change_percentage_7d_in_currency),d.push(t.total_volume),u.push(t.market_cap),h.push(t.fully_diluted_valuation);for(let e=0;e<c.length;e++)a+="<tr>",a+=`<td>${r[e]}</td>`,a+=`<td><img class="mx-2" width="20" src="${n[e]}">${c[e]}</td>`,a+=`<td>${"$"+o[e]}</td>`,a+=`<td class=${i[e]>0?"text-success":"text-danger"}>${i[e].toFixed(2)+"%"}</td>`,a+=`<td class=${s[e]>0?"text-success":"text-danger"}>${s[e].toFixed(2)+"%"}</td>`,a+=`<td class=${l[e]>0?"text-success":"text-danger"}>${l[e].toFixed(2)+"%"}</td>`,a+=`<td>${formatDollar(d[e])}</td>`,a+=`<td>${formatDollar(u[e])}</td>`,a+=`<td>${formatDollar(h[e])}</td>`,a+="</tr>";t.innerHTML=a}function loadDEXCoinsToTable(e){let t=document.querySelector("#dex-table-body"),a="",r=[],n=[],c=[],o=[],i=[],s=[],l=[],d=[],u=[],h=[],g=1;for(let t of e)r.push(g++),n.push(t.image),c.push(t.name),o.push(t.current_price),i.push(t.price_change_percentage_1h_in_currency),s.push(t.price_change_percentage_24h_in_currency),l.push(t.price_change_percentage_7d_in_currency),d.push(t.total_volume),u.push(t.market_cap),h.push(t.fully_diluted_valuation);for(let e=0;e<c.length;e++)a+="<tr>",a+=`<td>${r[e]}</td>`,a+=`<td><img class="mx-2" width="20" src="${n[e]}">${c[e]}</td>`,a+=`<td>${"$"+o[e]}</td>`,a+=`<td class=${i[e]>0?"text-success":"text-danger"}>${i[e].toFixed(2)+"%"}</td>`,a+=`<td class=${s[e]>0?"text-success":"text-danger"}>${s[e].toFixed(2)+"%"}</td>`,a+=`<td class=${l[e]>0?"text-success":"text-danger"}>${l[e].toFixed(2)+"%"}</td>`,a+=`<td>${formatDollar(d[e])}</td>`,a+=`<td>${formatDollar(u[e])}</td>`,a+=`<td>${formatDollar(h[e])}</td>`,a+="</tr>";t.innerHTML=a}function handleNumberClick(e,t,a){e.parentElement.classList="active";let r=parseInt(e.innerText);switch(getRankingData(getMarketURL(10*r-10)),r){case 1:disableLeftArrow(t),-1!==a.className.indexOf("disabled")&&enableRightArrow(a);break;case 10:disableRightArrow(a),-1!==t.className.indexOf("disabled")&&enableLeftArrow(t);break;default:-1!==t.className.indexOf("disabled")&&enableLeftArrow(t),-1!==a.className.indexOf("disabled")&&enableRightArrow(a)}}function handleLeftArrowClick(e,t,a){document.querySelectorAll("li")[e-1].classList="active",getRankingData(url=getMarketURL(10*(e-1)-10)),10===e&&enableRightArrow(a),e-1==1&&disableLeftArrow(t)}function handleRightArrowClick(e,t,a){document.querySelectorAll("li")[e+1].classList="active",getRankingData(url=getMarketURL(10*(e+1)-10)),1===e&&enableLeftArrow(t),e+1===10&&disableRightArrow(a)}function disableLeftArrow(e){e.classList="disabled"}function enableLeftArrow(e){e.classList=""}function disableRightArrow(e){e.classList="disabled"}function enableRightArrow(e){e.classList=""}let activePageNumber,clickedLink,leftArrow,rightArrow,pageLinks=document.querySelectorAll("a"),url="";function init(){const e=getMarketURL(1),t=getGlobalURL(),a=getDefiCoinsURL(1),r=getDEXCoinsURL(1);getRankingData(e),getGlobalData(t),getDefiCoinsData(a),getDEXCoinsData(r)}pageLinks.forEach(e=>{e.addEventListener("click",function(){leftArrow=document.querySelector(".arrow-left"),rightArrow=document.querySelector(".arrow-right"),console.log(rightArrow),activeLink=document.querySelector(".active"),activePageNumber=parseInt(activeLink.innerText),"chevron_left"===this.innerText&&1===activePageNumber||"chevron_right"===this.innerText&&10===activePageNumber||(activeLink.classList="page-item","chevron_left"===this.innerText?handleLeftArrowClick(activePageNumber,leftArrow,rightArrow):"chevron_right"===this.innerText?handleRightArrowClick(activePageNumber,leftArrow,rightArrow):handleNumberClick(this,leftArrow,rightArrow))})}),init();